# `Диплом` - `Фёдоров Илья`

### Terraform

Приступил к заданию. В первую очередь начал с повторения материала по Terraform и дополнительному изучению синтаксиса кода. В этом очень помогли официальные документации Яндекс и HashiCorp, поскольку всё, что от меня требовалось, это грамотно накодить сеть.

Говоря о проблемах работы с Terraform, могу только отметить нестабильность зеркала Яндекс и тот факт, что у меня не получилось настроить вход через `cloud_config.txt`, поэтому я перешёл на SSH ключи. Также в какой-то момент Terraform перестал распознавать переменные, и мне пришлось объединить всё в единый файл.

![Terraform Screenshot 1](https://github.com/Limzor/Diplom/blob/main/Screenshot_4.png)

Пройдя долгий и тернистый путь синтаксических и логических ошибок, в конце концов, мне удалось запустить рабочую сеть. Единственный недостаток сети в том, что я так и не разобрался, как заставить Terraform автоматически добавлять IP бастиона в security group, поэтому приходилось каждый раз обновлять данное правило.

![Terraform Screenshot 2](https://github.com/Limzor/Diplom/blob/main/Screenshot_1.png)
![Terraform Screenshot 3](https://github.com/Limzor/Diplom/blob/main/Screenshot_2.png)

### Ansible

После создания сети в Terraform пришло время Ansible. Стоит сказать, что именно работа с данной программой заняла у меня больше всего времени. Плейбук для хоста я написал очень быстро.

Когда я приступил к написанию плейбука для хостов, ожидал, что основной проблемой будет стек ELK, однако, к моему большому удивлению, основной проблемой стало создание базы Postgresql на Zabbix-Server. К счастью, я наткнулся на хороший пост на [Stack Overflow](https://ru.stackoverflow.com/questions/1182421/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C-user-db-%D0%B2-postgresql-%D1%81%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B2%D0%B0%D0%BC%D0%B8-ansible), где подробно было описано решение проблемы с подключением Ansible к БД. Стоит отметить, что гайд по установке Zabbix от Нетологии тоже очень помог. Там я узнал, что можно спокойно выполнять действия от пользователя Postgresql и сильно не морочиться с командами.

![Ansible Screenshot](https://github.com/Limzor/Diplom/blob/main/Screenshot_3.png)

Для тестирования Ansible я создавал отдельные тестовые сети и писал под каждую задачу отдельный плейбук, после чего добавлял шаблоны и код к основному проекту. Это позволило мне сэкономить немало времени на тестировании прототипов финального плейбука.

В конце хотелось бы сказать, что, несмотря на то что на проект ушло много времени, нервов и сил, я рад полученным знаниям и навыкам.

![Terraform Screenshot 3](https://github.com/Limzor/Diplom/blob/main/33.png)
